# 第18课：典型网络故障：选择长连接 or 短连接，大量 Timewait 的产生时如何处理？

本课时内容主要分为 4 个模块：

* 第 1 个模块中会讲解什么是长连接和短连接。

* 第 2 个模块讲解长连接和短连接应用场景。

* 第 3 个模块结合 Timewait 和 TCP 连接的关系来讲解它们是如何产生的。

* 第 4 个模块会分析 Timewait 对系统性能产生的一些影响，以及应该如何去进行优化。


## 什么是长连接和短连接

我们进入第 1 个模块的学习，什么是长连接和短连接？这里我画了一张图：

Ciqah16X-TaACWjHAARWKvt67Qs928.png

左边是短连接，右边是长连接。我们会看到短连接为每一次的数据传输准备了一个传输通道，比如客户端向服务端要传送数据的时候，它会先建立连接，然后传递数据，最后关闭连接。当要传递第 2 份数据的时候，又要重复这个过程。所以短连接就是在每一次传输数据前，建立一次连接的通道。



长连接则是建立了一条可以连接通道，并一直保持，每一次传输数据时会复用同一条连接通道。

