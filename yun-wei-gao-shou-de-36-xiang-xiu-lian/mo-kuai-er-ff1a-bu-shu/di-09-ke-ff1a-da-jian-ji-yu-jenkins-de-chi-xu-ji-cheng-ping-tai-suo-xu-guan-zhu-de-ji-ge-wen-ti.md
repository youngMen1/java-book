# 第09课：搭建基于 Jenkins 的持续集成平台所需关注的几个问题

本课时，讲解基于Jenkins 的持续集成架构及常见问题。

## 学前提示与基础概念

### Jenkins 简介

首先，说到 Jenkins，你肯定知道它是一个用于搭建持续集成平台的开源工具，它的官网地址是：https://jenkins.io/。那什么是持续集成呢，持续集成是近些年来企业管理、软件开发、软件上线过程中的一个概念。我的理解是它主要强调的是：

开发人员在提交了新的代码以后，立即进行构建、（单元）测试等相关流程；

自动化部署。

等。

持续集成和 Devops 的差异

持续集成这个概念想必我们早已耳熟能详了，近些年新产生的一个概念叫作 Devops，那持续集成和 Devops 有什么差异呢？你可以看一下我这里画的一张图示：
CgpOIF5wY7yAJJsMAAJRRuQVMKw843.png

我这里画了最外圈的一个方框，代表的是 Devops 一层，其里面包含了持续集成的流程部分。我们看到，里面的小方框中是持续集成覆盖的范围，包含三个部分：开发、测试和部署，这三个环节对企业开发来说是必备的，是必须要经过的流程，持续集成作到了把三个过程很好的相互串联起来。



所以持续集成覆盖的主要是开发、测试和部署三个环节，但是持续集成忽略了一个重要的步骤，就是上线以后的运维环节。运维的成本对于企业来说也是消耗比较大的，而 Devops 就集成了整个持续集成环节，并且重点融入了运维环节来考虑。



总结下，持续集成和 Devops 共同的技术要求是：

1.自动化，我们要做到部署自动化、测试自动化等。

2.各项流程需要无缝打通，如开发到测试，测试到部署，这些都要求无缝地把各个管理环节和流程打通。

3.交给统一平台进行可视化管理。

这就是持续集成和 Devops 所具备的共性要求。随着课程后续的进展，我们不仅会慢慢感受到持续集成的作用，更会学习到 Devops 的详细实现方式。

### 学习基础

这里提醒你，学习本课程可能需要你具备 Linux 的操作基础，同时要掌握 Jenkins 的基础操作能力。

## 基于 Jenkins 的持续集成方案
接下来我们来介绍第一部分的内容：基于 Jenkins 的持续集成方案。

### 小型集成架构
以我对 Jenkins 的了解，首先第一个持续集成的方案，就是小型的持续集成架构。我们会看到这样一张图：
![](/static/image/Cgq2xl5wY76ASQwBAAUQzeQk2NQ579.png)

整体上 Jenkins 把整套流程进行了串通，从研发上传到代码仓库，通过代码仓库自动触发代码的下载、代码的编译及构建，接下来做代码的测试，并且完成工程的打包，最后进行代码的部署。



我们看到，代码的部署可以通过 Shell 脚本来实现，自动发布到预上线环境和上线等环境，多套环线的打通也是在 Jenkins 中完成的。



这个架构包含这几个部分：

1.版本库管理，用 SVN 或者 Git 来做代码版本的管理，Git 和 SVN 的区别是，Git 是一个多分支的代码管理系统，通常现在大部分的企业已将 SVN 改为 Git 来做代码管理。

2.Jenkins 调用的代码构建工具，如果是 Java 的相关服务，就需要调用到 maven 或者 ant 等工具来实现 Java 代码的编译和构建。

3.私服系统，企业会搭建一个自己的私服，可以代理远程仓库和部署自己或第三方构件。

4.Junit 和 TestLink 通常可以用为单元测试。

5.Shell 脚本逻辑主要为了串联发布流程各个步骤，把测试好的代码工程包通过执行 Shell 脚本发布到各个部署环境。


### 微服集成架构
接下来我们再看一下所谓的微服务集成架构。
CgpOIF5wY76AB1SaAAZNIemKRrY433.png

