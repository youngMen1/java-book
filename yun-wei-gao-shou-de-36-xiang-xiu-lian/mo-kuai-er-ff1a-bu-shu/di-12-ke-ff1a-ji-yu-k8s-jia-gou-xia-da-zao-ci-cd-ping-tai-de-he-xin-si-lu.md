# 第12课：基于 K8S 架构下打造 CI\CD 平台的核心思路

本课时我们讲解一套在 K8s 环境下打造 CI\CD 平台的核心思路。

## K8s 架构中的 CI\CD 平台

### 课程意义
在开始之前，我给你讲一下学习本课时的意义。在课时 9 中，我们介绍了基于 Jenkins 的持续集成架构及普通使用模式下需要注意的问题。在本课时，我们来讲解基于 K8s 和 Docker 容器化部署架构下需要实现 CI\CD 平台所需关注核心知识，如： CI/CD 平台实现后需要具备什么样的特性？架构设计上需要注意什么？希望在本课时能带你找到对应的答案。
### K8s 中的 CI\CD 平台应该实现的功能
首先，开门见山的来讲一下 K8s 和 Docker 部署架构下，所具备的特性：
1.支持容器部署，作到基于镜像方式发布、K8s 进行编排，所以在 CI\CD 平台里面，我们务必要遵循容器及 K8s 的发布部署方式。

2.在 K8s环境下，Devops 理念更加突出，需要作到通过 Jenkins 的 API 创建和管理 Job 。

3.Pipeline 灵活性管理 Job ，基于流水线的方式，能给我们带来更多的灵活性的 Job 管理和定义。

4.需要支持多环境、多版本的发布场景。我们在大的企业环境下，常遇到多套工程的部署环境，可能也会有多套代码分支，CI\CD 平台应该更好地兼容这样的环境进行设计。

5.我们需要注重 Jenkins，也就是 CI\CD 平台本身的高可用，如果是基于单点的方式部署 Jenkins，它本身就不是高可用的，我们需要考虑它本身的高可用性。

基于这样的理念和要求，我认为要做这样的一个平台，归纳起来需要包括以下几个核心的功能：

1.Jenkins 部署高可用。

2.通过 Pipeline 创建\管理 Job。

3.通过 API 接口创建\管理 Job。

以上是接下来我要介绍的在 K8s 架构下搭建 Jenkins 的 CI\CD 平台的三点必要能力，接下来我们详细的讲解一下。

### 学前提示
在学习本课时之前，你需要了解 Jenkins 基础搭建和基础配置，同时需要对 K8s 有一定了解，比如 pod、node、service 分别是什么概念？K8s 结构组成是什么样子的？另外，如果要把整个平台搭建起来，还需要具备 Docker 镜像打包和发布整个流程的技术操作能力。

### 核心思路

接下来，就基于刚刚讲到的三点核心内容，我们逐一来进行介绍。

### 思路一、Jenkins 服务高可用

首先第一点，就是 Jenkins 本身服务的部署高可用。