# 第28课：防洪安全：DDoS 的原理分析及攻防策略
本课时我们来讲解攻防安全：DDoS 攻击原理分析及攻防策略。

## DDOS 攻击的痛点和类型
在前面两个课时，我们讲的安全内容主要是围绕 4 层协议安全（iptables 准入防火墙设置），以及应用层安全（ HTTP、HTTPS 常见攻击行为和防范策略）两个课题。本课时讲的 DDOS 攻击 ，它的攻击形式分析会表现得会更加简单，但通常依靠本身企业能力往往难以防范，为什么这么说呢？ 主要原因有两个：

1.难以溯源 DDOS 攻击源头。由于 DDOS 通常通过大量肉鸡发起流量攻击并对 IP 加以伪造，很难找到真实攻击者 IP。

2.防御成本高。攻击者发起攻击的成本远低于防御的成本，DDOS 这种流量型的攻击，它往往会利用大量肉鸡发起低成本流量的拥堵。对于单个企业而言，没有清洗流量的统一能力，因为建造清洗的能力，需要花大量的成本（设备、带宽等）。所以特别是中小型企业为了防御这种攻击，往往需要采购一些第三方防范服务，来帮助解决这样的一些问题。

常见的 DDOS 攻击的类型有哪些呢？这里列举了 3 种模式：

1.反射放大；
2.SYN Flood；
3.HTTP Flood。

## DDOS 反射放大及解决方式

我们首先来讲解 DDOS 反射放大攻击形式。我这里画了 3 张图，我们先来理解一下正常的用户访问服务端的过程。
Ciqc1F7XGfiAKxguAABXbJVWs34227.png
我们会看到，正常访问是客户 A，服务端 B，用户 A 请求服务端 B，返回正常响应。
Ciqc1F7XGgeAKCTmAACZ2aWSUnA297.png
第二幅图中呢，我们可以看到 A 来请求 B， B 返回的响应不再是给 A，而是响应给 C（另外一个客户端），A 可以通过一些特殊技术方式来实现，比如伪造自己的源 IP 地址，并利用一些 B 的协议类安全类漏洞，这样就导致 A 请求了 B，但是 B 却响应到了 C。

通常 B 服务存漏洞，如 DNS 协议漏洞，memcache 漏洞，以及 NTP 协议漏洞等，这些服务都有漏洞可以导致这样的一种攻击效果，并且可以造成放大的流量攻击，让 B 响应 C 的流量远远大于 A 请求的流量。
Ciqc1F7XGhCALO3jAAHVahXZDWQ149.png