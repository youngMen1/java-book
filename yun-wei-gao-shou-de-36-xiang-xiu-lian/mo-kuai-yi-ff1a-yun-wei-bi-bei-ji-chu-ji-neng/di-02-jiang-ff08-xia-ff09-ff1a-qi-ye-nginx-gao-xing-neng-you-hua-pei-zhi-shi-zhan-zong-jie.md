# 第02讲（下）：企业 Nginx 高性能优化配置实战总结

如果你作为网站类的技术工程师，并且把 Nginx 作为代理入口的 HTTP 网关，这时对于网站优化有效的方式除了需要考虑基础配置优化外，更有用的方式就是优化缓存，这一课时我们就详细讲解缓存配置优化的具体内容。

用到缓存优化主要期望提高网站服务访问效率，减少服务端的性能使用。

我将缓存配置优化大致可以分为几个部分，分别是浏览器缓存优化、代理缓存优化、HTTPS SSL 缓存优化、KV 服务缓存优化等。

接下来我们来了解一个问题，客户端如何直观的看到大部分缓存（浏览器缓存、代理缓存、ssl缓存）优化效果呢？推荐你用 Chrome 浏览器中的开发者工具，打开浏览器并点击视图-开发者工具。如我在在 URL 地址栏中输入  www.jesonc.com。这个时候我们会看到在 Network 标签栏中会出现对应的访问名称、路径。然后点击某一个路径，这时会在 Headers 中看到响应的头信息内容。

我们刚用浏览器打开 www.jesonc.com 这个网站，表示浏览器发送一次 HTTP 请求，我们能看到服务端会返回给客户端代码经过渲染后的一个效果展示。如果点击右键查看源代码，这样就可以看到网站返回的 body 内容。除了 body 之外，一个完整的 HTTP 响应，服务端返回给客户端还有一部分就是 Response Headers，表示服务端返回给客户端的头信息 内容。

如上是带你体会的一次 HTTP 请求和响应的过程，本课程中如果我们想判断服务端有没有做缓存，缓存的时间是多长。这些内容都会在头信息中通过服务端展示给客户端，我们可以在 Response Headers 查看头信息。

如expires 头信息是控制在什么时间点生成的缓存元素，Cache Control 负责保存这个元素需要缓存多长时间。

那这一部分内容总结下，用Chrome 开发者工具让我们能够非常清晰的看到一次页面的打开效果，了解它的请求了是什么（请求头），服务端返回了什么（ body及返回 头信息），通过这个工具详细的查看数据并对一个页面缓存情况进行分析，对于开发和运维同学而言是必须要掌握的。

## 缓存优化

接下来我们讲解缓存优化配置，基于缓存元素存放的位置，再对我们所需要讲的缓存作一个分类。


如果缓存的元素在客户端的，那么主要有浏览器缓存和 HTTPS 缓存，你可别认为缓存文件是在客户端，这两部分缓存效果都可以 Nginx 这种代理来进行设置并作主要优化。


另外一个种类代理端的缓存（也就是缓存文件存放再代理服务的节点中），那Nginx 作为反向代理服务的时候，可以支持代理缓存设置。


最后一个种类是将缓存文件放入后台服务（通过后台服务中程序逻辑来实现）,例如我们可以将一部分数据通过此方式缓存，比如将用户最长查看的数据（网站中登录状态、连接数等）缓存到 Memcache、Redis 中，避免直接请求关系型数据库或其他服务，因为效用效率更高所以可以降低后端的延迟，也减少请求对数据库的依赖度，从而整个网站的性能也会有很大的提升。

只考虑缓存最优的话，我有三点经验可以分享给你：
